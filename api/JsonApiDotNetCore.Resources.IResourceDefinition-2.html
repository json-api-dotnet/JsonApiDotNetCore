<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Interface IResourceDefinition&lt;TResource, TId&gt; </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Interface IResourceDefinition&lt;TResource, TId&gt; ">
      
      <meta name="description" content="Provides an extensibility point to add business logic that is resource-oriented instead of endpoint-oriented.">
      <link rel="icon" href="../favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      
      
      
      <meta name="docfx:docurl" content="https://github.com/json-api-dotnet/JsonApiDotNetCore/new/master/apiSpec/new?filename=JsonApiDotNetCore_Resources_IResourceDefinition_2.md&amp;value=---%0Auid%3A%20JsonApiDotNetCore.Resources.IResourceDefinition%602%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

      <script async src="https://www.googletagmanager.com/gtag/js?id=G-78GTGF1FM2"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-78GTGF1FM2');
      </script>
  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="ManagedReference">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../styles/img/favicon.png" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="JsonApiDotNetCore.Resources.IResourceDefinition`2">



  <h1 id="JsonApiDotNetCore_Resources_IResourceDefinition_2" data-uid="JsonApiDotNetCore.Resources.IResourceDefinition`2" class="text-break">
Interface IResourceDefinition&lt;TResource, TId&gt;  <a class="header-action link-secondary" title="View source" href="https://github.com/json-api-dotnet/JsonApiDotNetCore/blob/master/src/JsonApiDotNetCore/Resources/IResourceDefinition.cs/#L18"><i class="bi bi-code-slash"></i></a>
  </h1>

  <div class="facts text-secondary">
    <dl><dt>Namespace</dt><dd><a class="xref" href="JsonApiDotNetCore.html">JsonApiDotNetCore</a>.<a class="xref" href="JsonApiDotNetCore.Resources.html">Resources</a></dd></dl>
  <dl><dt>Assembly</dt><dd>JsonApiDotNetCore.dll</dd></dl>
  </div>

  <div class="markdown summary"><p>Provides an extensibility point to add business logic that is resource-oriented instead of endpoint-oriented.</p>
</div>
  <div class="markdown conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">[PublicAPI]
public interface IResourceDefinition&lt;TResource, in TId&gt; where TResource : class, IIdentifiable&lt;in TId&gt;</code></pre>
  </div>



  <h4 class="section">Type Parameters</h4>
  <dl class="parameters">
    <dt><code>TResource</code></dt>
    <dd><p>The resource type.</p>
</dd>
    <dt><code>TId</code></dt>
    <dd><p>The resource identifier type.</p>
</dd>
  </dl>










  <h2 class="section" id="methods">Methods
</h2>


  <a id="JsonApiDotNetCore_Resources_IResourceDefinition_2_GetMeta_" data-uid="JsonApiDotNetCore.Resources.IResourceDefinition`2.GetMeta*"></a>

  <h3 id="JsonApiDotNetCore_Resources_IResourceDefinition_2_GetMeta__0_" data-uid="JsonApiDotNetCore.Resources.IResourceDefinition`2.GetMeta(`0)">
  GetMeta(TResource)
  <a class="header-action link-secondary" title="View source" href="https://github.com/json-api-dotnet/JsonApiDotNetCore/blob/master/src/JsonApiDotNetCore/Resources/IResourceDefinition.cs/#L119"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Enables to add JSON:API meta information, specific to this resource.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">IDictionary&lt;string, object?&gt;? GetMeta(TResource resource)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>resource</code> <span class="xref">TResource</span></dt>
    <dd></dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.collections.generic.idictionary-2">IDictionary</a>&lt;<a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a>, <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object">object</a>&gt;</dt>
    <dd></dd>
  </dl>











  <a id="JsonApiDotNetCore_Resources_IResourceDefinition_2_OnAddToRelationshipAsync_" data-uid="JsonApiDotNetCore.Resources.IResourceDefinition`2.OnAddToRelationshipAsync*"></a>

  <h3 id="JsonApiDotNetCore_Resources_IResourceDefinition_2_OnAddToRelationshipAsync__0_JsonApiDotNetCore_Resources_Annotations_HasManyAttribute_System_Collections_Generic_ISet_JsonApiDotNetCore_Resources_IIdentifiable__System_Threading_CancellationToken_" data-uid="JsonApiDotNetCore.Resources.IResourceDefinition`2.OnAddToRelationshipAsync(`0,JsonApiDotNetCore.Resources.Annotations.HasManyAttribute,System.Collections.Generic.ISet{JsonApiDotNetCore.Resources.IIdentifiable},System.Threading.CancellationToken)">
  OnAddToRelationshipAsync(TResource, HasManyAttribute, ISet&lt;IIdentifiable&gt;, CancellationToken)
  <a class="header-action link-secondary" title="View source" href="https://github.com/json-api-dotnet/JsonApiDotNetCore/blob/master/src/JsonApiDotNetCore/Resources/IResourceDefinition.cs/#L234"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Executes before adding resources to the right side of a to-many relationship, as part of a POST relationship request.</p>
<p>
Implementing this method enables to perform validations and make changes to <code class="paramref">rightResourceIds</code>, before the relationship is updated.
</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">Task OnAddToRelationshipAsync(TResource leftResource, HasManyAttribute hasManyRelationship, ISet&lt;IIdentifiable&gt; rightResourceIds, CancellationToken cancellationToken)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>leftResource</code> <span class="xref">TResource</span></dt>
    <dd><p>Identifier of the left resource. The indication &quot;left&quot; specifies that <code class="paramref">hasManyRelationship</code> is declared on
<code class="typeparamref">TResource</code>. In contrast to other relationship methods, this value is not retrieved from the underlying data store, except in
the following two cases:</p>
<ul><li>
<code class="paramref">hasManyRelationship</code> is a many-to-many relationship. This is required to prevent failure when already assigned.
</li><li>
The left resource type is part of a type hierarchy. This ensures your business logic runs against the actually stored type.
</li></ul>
</dd>
    <dt><code>hasManyRelationship</code> <a class="xref" href="JsonApiDotNetCore.Resources.Annotations.HasManyAttribute.html">HasManyAttribute</a></dt>
    <dd><p>The to-many relationship being added to.</p>
</dd>
    <dt><code>rightResourceIds</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.collections.generic.iset-1">ISet</a>&lt;<a class="xref" href="JsonApiDotNetCore.Resources.IIdentifiable.html">IIdentifiable</a>&gt;</dt>
    <dd><p>The set of resource identifiers to add to the to-many relationship, coming from the request.</p>
</dd>
    <dt><code>cancellationToken</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.cancellationtoken">CancellationToken</a></dt>
    <dd><p>Propagates notification that request handling should be canceled.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.tasks.task">Task</a></dt>
    <dd></dd>
  </dl>











  <a id="JsonApiDotNetCore_Resources_IResourceDefinition_2_OnApplyFilter_" data-uid="JsonApiDotNetCore.Resources.IResourceDefinition`2.OnApplyFilter*"></a>

  <h3 id="JsonApiDotNetCore_Resources_IResourceDefinition_2_OnApplyFilter_JsonApiDotNetCore_Queries_Expressions_FilterExpression_" data-uid="JsonApiDotNetCore.Resources.IResourceDefinition`2.OnApplyFilter(JsonApiDotNetCore.Queries.Expressions.FilterExpression)">
  OnApplyFilter(FilterExpression?)
  <a class="header-action link-secondary" title="View source" href="https://github.com/json-api-dotnet/JsonApiDotNetCore/blob/master/src/JsonApiDotNetCore/Resources/IResourceDefinition.cs/#L42"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Enables to extend, replace or remove a filter that is being applied on a set of this resource type.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">FilterExpression? OnApplyFilter(FilterExpression? existingFilter)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>existingFilter</code> <a class="xref" href="JsonApiDotNetCore.Queries.Expressions.FilterExpression.html">FilterExpression</a></dt>
    <dd><p>An optional existing filter, coming from query string. Can be <code>null</code>.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="JsonApiDotNetCore.Queries.Expressions.FilterExpression.html">FilterExpression</a></dt>
    <dd><p>The new filter, or <code>null</code> to disable the existing filter.</p>
</dd>
  </dl>











  <a id="JsonApiDotNetCore_Resources_IResourceDefinition_2_OnApplyIncludes_" data-uid="JsonApiDotNetCore.Resources.IResourceDefinition`2.OnApplyIncludes*"></a>

  <h3 id="JsonApiDotNetCore_Resources_IResourceDefinition_2_OnApplyIncludes_System_Collections_Immutable_IImmutableSet_JsonApiDotNetCore_Queries_Expressions_IncludeElementExpression__" data-uid="JsonApiDotNetCore.Resources.IResourceDefinition`2.OnApplyIncludes(System.Collections.Immutable.IImmutableSet{JsonApiDotNetCore.Queries.Expressions.IncludeElementExpression})">
  OnApplyIncludes(IImmutableSet&lt;IncludeElementExpression&gt;)
  <a class="header-action link-secondary" title="View source" href="https://github.com/json-api-dotnet/JsonApiDotNetCore/blob/master/src/JsonApiDotNetCore/Resources/IResourceDefinition.cs/#L31"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Enables to extend, replace or remove includes that are being applied on this resource type.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">IImmutableSet&lt;IncludeElementExpression&gt; OnApplyIncludes(IImmutableSet&lt;IncludeElementExpression&gt; existingIncludes)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>existingIncludes</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.collections.immutable.iimmutableset-1">IImmutableSet</a>&lt;<a class="xref" href="JsonApiDotNetCore.Queries.Expressions.IncludeElementExpression.html">IncludeElementExpression</a>&gt;</dt>
    <dd><p>An optional existing set of includes, coming from query string. Never <code>null</code>, but may be empty.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.collections.immutable.iimmutableset-1">IImmutableSet</a>&lt;<a class="xref" href="JsonApiDotNetCore.Queries.Expressions.IncludeElementExpression.html">IncludeElementExpression</a>&gt;</dt>
    <dd><p>The new set of includes. Return an empty collection to remove all inclusions (never return <code>null</code>).</p>
</dd>
  </dl>











  <a id="JsonApiDotNetCore_Resources_IResourceDefinition_2_OnApplyPagination_" data-uid="JsonApiDotNetCore.Resources.IResourceDefinition`2.OnApplyPagination*"></a>

  <h3 id="JsonApiDotNetCore_Resources_IResourceDefinition_2_OnApplyPagination_JsonApiDotNetCore_Queries_Expressions_PaginationExpression_" data-uid="JsonApiDotNetCore.Resources.IResourceDefinition`2.OnApplyPagination(JsonApiDotNetCore.Queries.Expressions.PaginationExpression)">
  OnApplyPagination(PaginationExpression?)
  <a class="header-action link-secondary" title="View source" href="https://github.com/json-api-dotnet/JsonApiDotNetCore/blob/master/src/JsonApiDotNetCore/Resources/IResourceDefinition.cs/#L66"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Enables to extend, replace or remove pagination that is being applied on a set of this resource type.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">PaginationExpression? OnApplyPagination(PaginationExpression? existingPagination)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>existingPagination</code> <a class="xref" href="JsonApiDotNetCore.Queries.Expressions.PaginationExpression.html">PaginationExpression</a></dt>
    <dd><p>An optional existing pagination, coming from query string. Can be <code>null</code>.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="JsonApiDotNetCore.Queries.Expressions.PaginationExpression.html">PaginationExpression</a></dt>
    <dd><p>The changed pagination, or <code>null</code> to use the first page with default size from options. To disable pagination, set
<a class="xref" href="JsonApiDotNetCore.Queries.Expressions.PaginationExpression.html#JsonApiDotNetCore_Queries_Expressions_PaginationExpression_PageSize">PageSize</a> to <code>null</code>.</p>
</dd>
  </dl>











  <a id="JsonApiDotNetCore_Resources_IResourceDefinition_2_OnApplySort_" data-uid="JsonApiDotNetCore.Resources.IResourceDefinition`2.OnApplySort*"></a>

  <h3 id="JsonApiDotNetCore_Resources_IResourceDefinition_2_OnApplySort_JsonApiDotNetCore_Queries_Expressions_SortExpression_" data-uid="JsonApiDotNetCore.Resources.IResourceDefinition`2.OnApplySort(JsonApiDotNetCore.Queries.Expressions.SortExpression)">
  OnApplySort(SortExpression?)
  <a class="header-action link-secondary" title="View source" href="https://github.com/json-api-dotnet/JsonApiDotNetCore/blob/master/src/JsonApiDotNetCore/Resources/IResourceDefinition.cs/#L54"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Enables to extend, replace or remove a sort order that is being applied on a set of this resource type. Tip: Use
<a class="xref" href="JsonApiDotNetCore.Resources.JsonApiResourceDefinition-2.html#JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_CreateSortExpressionFromLambda_JsonApiDotNetCore_Resources_JsonApiResourceDefinition__0__1__PropertySortOrder_">CreateSortExpressionFromLambda(PropertySortOrder)</a> to build from a lambda expression.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">SortExpression? OnApplySort(SortExpression? existingSort)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>existingSort</code> <a class="xref" href="JsonApiDotNetCore.Queries.Expressions.SortExpression.html">SortExpression</a></dt>
    <dd><p>An optional existing sort order, coming from query string. Can be <code>null</code>.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="JsonApiDotNetCore.Queries.Expressions.SortExpression.html">SortExpression</a></dt>
    <dd><p>The new sort order, or <code>null</code> to disable the existing sort order and sort by ID.</p>
</dd>
  </dl>











  <a id="JsonApiDotNetCore_Resources_IResourceDefinition_2_OnApplySparseFieldSet_" data-uid="JsonApiDotNetCore.Resources.IResourceDefinition`2.OnApplySparseFieldSet*"></a>

  <h3 id="JsonApiDotNetCore_Resources_IResourceDefinition_2_OnApplySparseFieldSet_JsonApiDotNetCore_Queries_Expressions_SparseFieldSetExpression_" data-uid="JsonApiDotNetCore.Resources.IResourceDefinition`2.OnApplySparseFieldSet(JsonApiDotNetCore.Queries.Expressions.SparseFieldSetExpression)">
  OnApplySparseFieldSet(SparseFieldSetExpression?)
  <a class="header-action link-secondary" title="View source" href="https://github.com/json-api-dotnet/JsonApiDotNetCore/blob/master/src/JsonApiDotNetCore/Resources/IResourceDefinition.cs/#L85"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Enables to extend, replace or remove a sparse fieldset that is being applied on a set of this resource type. Tip: Use
<a class="xref" href="JsonApiDotNetCore.Queries.Expressions.SparseFieldSetExpressionExtensions.html#JsonApiDotNetCore_Queries_Expressions_SparseFieldSetExpressionExtensions_Including__1_JsonApiDotNetCore_Queries_Expressions_SparseFieldSetExpression_System_Linq_Expressions_Expression_System_Func___0_System_Object___JsonApiDotNetCore_Configuration_IResourceGraph_">Including&lt;TResource&gt;(SparseFieldSetExpression?, Expression&lt;Func&lt;TResource, object?&gt;&gt;, IResourceGraph)</a> and <a class="xref" href="JsonApiDotNetCore.Queries.Expressions.SparseFieldSetExpressionExtensions.html#JsonApiDotNetCore_Queries_Expressions_SparseFieldSetExpressionExtensions_Excluding__1_JsonApiDotNetCore_Queries_Expressions_SparseFieldSetExpression_System_Linq_Expressions_Expression_System_Func___0_System_Object___JsonApiDotNetCore_Configuration_IResourceGraph_">Excluding&lt;TResource&gt;(SparseFieldSetExpression?, Expression&lt;Func&lt;TResource, object?&gt;&gt;, IResourceGraph)</a> to
safely change the fieldset without worrying about nulls.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">SparseFieldSetExpression? OnApplySparseFieldSet(SparseFieldSetExpression? existingSparseFieldSet)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>existingSparseFieldSet</code> <a class="xref" href="JsonApiDotNetCore.Queries.Expressions.SparseFieldSetExpression.html">SparseFieldSetExpression</a></dt>
    <dd><p>The incoming sparse fieldset from query string. At query execution time, this is <code>null</code> if the query string contains no sparse fieldset. At
serialization time, this contains all viewable fields if the query string contains no sparse fieldset.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="JsonApiDotNetCore.Queries.Expressions.SparseFieldSetExpression.html">SparseFieldSetExpression</a></dt>
    <dd><p>The new sparse fieldset, or <code>null</code> to discard the existing sparse fieldset and select all viewable fields.</p>
</dd>
  </dl>







  <h4 class="section" id="JsonApiDotNetCore_Resources_IResourceDefinition_2_OnApplySparseFieldSet_JsonApiDotNetCore_Queries_Expressions_SparseFieldSetExpression__remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>This method executes twice for a single request: first to select which fields to retrieve from the data store and then to select which fields to
serialize. Including extra fields from this method will retrieve them, but not include them in the json output. This enables you to expose calculated
properties whose value depends on a field that is not in the sparse fieldset.</p>
</div>




  <a id="JsonApiDotNetCore_Resources_IResourceDefinition_2_OnDeserialize_" data-uid="JsonApiDotNetCore.Resources.IResourceDefinition`2.OnDeserialize*"></a>

  <h3 id="JsonApiDotNetCore_Resources_IResourceDefinition_2_OnDeserialize__0_" data-uid="JsonApiDotNetCore.Resources.IResourceDefinition`2.OnDeserialize(`0)">
  OnDeserialize(TResource)
  <a class="header-action link-secondary" title="View source" href="https://github.com/json-api-dotnet/JsonApiDotNetCore/blob/master/src/JsonApiDotNetCore/Resources/IResourceDefinition.cs/#L323"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Executes after a resource has been deserialized from an incoming request body.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">void OnDeserialize(TResource resource)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>resource</code> <span class="xref">TResource</span></dt>
    <dd><p>The deserialized resource.</p>
</dd>
  </dl>












  <a id="JsonApiDotNetCore_Resources_IResourceDefinition_2_OnPrepareWriteAsync_" data-uid="JsonApiDotNetCore.Resources.IResourceDefinition`2.OnPrepareWriteAsync*"></a>

  <h3 id="JsonApiDotNetCore_Resources_IResourceDefinition_2_OnPrepareWriteAsync__0_JsonApiDotNetCore_Middleware_WriteOperationKind_System_Threading_CancellationToken_" data-uid="JsonApiDotNetCore.Resources.IResourceDefinition`2.OnPrepareWriteAsync(`0,JsonApiDotNetCore.Middleware.WriteOperationKind,System.Threading.CancellationToken)">
  OnPrepareWriteAsync(TResource, WriteOperationKind, CancellationToken)
  <a class="header-action link-secondary" title="View source" href="https://github.com/json-api-dotnet/JsonApiDotNetCore/blob/master/src/JsonApiDotNetCore/Resources/IResourceDefinition.cs/#L145"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Executes after the original version of the resource has been retrieved from the underlying data store, as part of a write request.</p>
<p>
Implementing this method enables to perform validations and make changes to <code class="paramref">resource</code>, before the fields from the request are
copied into it.
</p>
<p>
For POST resource requests, this method is typically used to assign property default values or to set required relationships by side-loading the
related resources and linking them.
</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">Task OnPrepareWriteAsync(TResource resource, WriteOperationKind writeOperation, CancellationToken cancellationToken)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>resource</code> <span class="xref">TResource</span></dt>
    <dd><p>The original resource retrieved from the underlying data store, or a freshly instantiated resource in case of a POST resource request.</p>
</dd>
    <dt><code>writeOperation</code> <a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html">WriteOperationKind</a></dt>
    <dd><p>Identifies the logical write operation for which this method was called. Possible values: <a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_CreateResource">CreateResource</a>,
<a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_UpdateResource">UpdateResource</a>, <a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_SetRelationship">SetRelationship</a> and
<a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_RemoveFromRelationship">RemoveFromRelationship</a>. Note this intentionally excludes <a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_DeleteResource">DeleteResource</a> and
<a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_AddToRelationship">AddToRelationship</a>, because for those endpoints no resource is retrieved upfront.</p>
</dd>
    <dt><code>cancellationToken</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.cancellationtoken">CancellationToken</a></dt>
    <dd><p>Propagates notification that request handling should be canceled.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.tasks.task">Task</a></dt>
    <dd></dd>
  </dl>











  <a id="JsonApiDotNetCore_Resources_IResourceDefinition_2_OnRegisterQueryableHandlersForQueryStringParameters_" data-uid="JsonApiDotNetCore.Resources.IResourceDefinition`2.OnRegisterQueryableHandlersForQueryStringParameters*"></a>

  <h3 id="JsonApiDotNetCore_Resources_IResourceDefinition_2_OnRegisterQueryableHandlersForQueryStringParameters" data-uid="JsonApiDotNetCore.Resources.IResourceDefinition`2.OnRegisterQueryableHandlersForQueryStringParameters">
  OnRegisterQueryableHandlersForQueryStringParameters()
  <a class="header-action link-secondary" title="View source" href="https://github.com/json-api-dotnet/JsonApiDotNetCore/blob/master/src/JsonApiDotNetCore/Resources/IResourceDefinition.cs/#L112"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Enables to adapt the Entity Framework Core <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.linq.iqueryable-1">IQueryable&lt;T&gt;</a> query, based on custom query string parameters. Note this only works on
primary resource requests, such as /articles, but not on /blogs/1/articles or /blogs?include=articles.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">QueryStringParameterHandlers&lt;TResource&gt;? OnRegisterQueryableHandlersForQueryStringParameters()</code></pre>
  </div>


  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="JsonApiDotNetCore.Resources.QueryStringParameterHandlers-1.html">QueryStringParameterHandlers</a>&lt;TResource&gt;</dt>
    <dd></dd>
  </dl>






  <h4 class="section" id="JsonApiDotNetCore_Resources_IResourceDefinition_2_OnRegisterQueryableHandlersForQueryStringParameters_examples">Examples</h4>
  <pre><code class="lang-csharp">protected override QueryStringParameterHandlers OnRegisterQueryableHandlersForQueryStringParameters()
{
    return new QueryStringParameterHandlers
    {
        ["isActive"] = (source, parameterValue) =&gt; source
            .Include(model =&gt; model.Children)
            .Where(model =&gt; model.LastUpdateTime &gt; DateTime.Now.AddMonths(-1)),
        ["isHighRisk"] = FilterByHighRisk
    };
}

private static IQueryable&lt;Model&gt; FilterByHighRisk(IQueryable&lt;Model&gt; source, StringValues parameterValue)
{
    bool isFilterOnHighRisk = bool.Parse(parameterValue);
    return isFilterOnHighRisk ? source.Where(model =&gt; model.RiskLevel &gt;= 5) : source.Where(model =&gt; model.RiskLevel &lt; 5);
}</code></pre>






  <a id="JsonApiDotNetCore_Resources_IResourceDefinition_2_OnRemoveFromRelationshipAsync_" data-uid="JsonApiDotNetCore.Resources.IResourceDefinition`2.OnRemoveFromRelationshipAsync*"></a>

  <h3 id="JsonApiDotNetCore_Resources_IResourceDefinition_2_OnRemoveFromRelationshipAsync__0_JsonApiDotNetCore_Resources_Annotations_HasManyAttribute_System_Collections_Generic_ISet_JsonApiDotNetCore_Resources_IIdentifiable__System_Threading_CancellationToken_" data-uid="JsonApiDotNetCore.Resources.IResourceDefinition`2.OnRemoveFromRelationshipAsync(`0,JsonApiDotNetCore.Resources.Annotations.HasManyAttribute,System.Collections.Generic.ISet{JsonApiDotNetCore.Resources.IIdentifiable},System.Threading.CancellationToken)">
  OnRemoveFromRelationshipAsync(TResource, HasManyAttribute, ISet&lt;IIdentifiable&gt;, CancellationToken)
  <a class="header-action link-secondary" title="View source" href="https://github.com/json-api-dotnet/JsonApiDotNetCore/blob/master/src/JsonApiDotNetCore/Resources/IResourceDefinition.cs/#L257"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Executes before removing resources from the right side of a to-many relationship, as part of a DELETE relationship request.</p>
<p>
Implementing this method enables to perform validations and make changes to <code class="paramref">rightResourceIds</code>, before the relationship is updated.
</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">Task OnRemoveFromRelationshipAsync(TResource leftResource, HasManyAttribute hasManyRelationship, ISet&lt;IIdentifiable&gt; rightResourceIds, CancellationToken cancellationToken)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>leftResource</code> <span class="xref">TResource</span></dt>
    <dd><p>Identifier of the left resource. The indication &quot;left&quot; specifies that <code class="paramref">hasManyRelationship</code> is declared on
<code class="typeparamref">TResource</code>. In contrast to other relationship methods, only the left ID and only the subset of right resources to be removed
are retrieved from the underlying data store.</p>
</dd>
    <dt><code>hasManyRelationship</code> <a class="xref" href="JsonApiDotNetCore.Resources.Annotations.HasManyAttribute.html">HasManyAttribute</a></dt>
    <dd><p>The to-many relationship being removed from.</p>
</dd>
    <dt><code>rightResourceIds</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.collections.generic.iset-1">ISet</a>&lt;<a class="xref" href="JsonApiDotNetCore.Resources.IIdentifiable.html">IIdentifiable</a>&gt;</dt>
    <dd><p>The set of resource identifiers to remove from the to-many relationship, coming from the request.</p>
</dd>
    <dt><code>cancellationToken</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.cancellationtoken">CancellationToken</a></dt>
    <dd><p>Propagates notification that request handling should be canceled.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.tasks.task">Task</a></dt>
    <dd></dd>
  </dl>











  <a id="JsonApiDotNetCore_Resources_IResourceDefinition_2_OnSerialize_" data-uid="JsonApiDotNetCore.Resources.IResourceDefinition`2.OnSerialize*"></a>

  <h3 id="JsonApiDotNetCore_Resources_IResourceDefinition_2_OnSerialize__0_" data-uid="JsonApiDotNetCore.Resources.IResourceDefinition`2.OnSerialize(`0)">
  OnSerialize(TResource)
  <a class="header-action link-secondary" title="View source" href="https://github.com/json-api-dotnet/JsonApiDotNetCore/blob/master/src/JsonApiDotNetCore/Resources/IResourceDefinition.cs/#L339"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Executes before a (primary or included) resource is serialized into an outgoing response body.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">void OnSerialize(TResource resource)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>resource</code> <span class="xref">TResource</span></dt>
    <dd><p>The serialized resource.</p>
</dd>
  </dl>












  <a id="JsonApiDotNetCore_Resources_IResourceDefinition_2_OnSetToManyRelationshipAsync_" data-uid="JsonApiDotNetCore.Resources.IResourceDefinition`2.OnSetToManyRelationshipAsync*"></a>

  <h3 id="JsonApiDotNetCore_Resources_IResourceDefinition_2_OnSetToManyRelationshipAsync__0_JsonApiDotNetCore_Resources_Annotations_HasManyAttribute_System_Collections_Generic_ISet_JsonApiDotNetCore_Resources_IIdentifiable__JsonApiDotNetCore_Middleware_WriteOperationKind_System_Threading_CancellationToken_" data-uid="JsonApiDotNetCore.Resources.IResourceDefinition`2.OnSetToManyRelationshipAsync(`0,JsonApiDotNetCore.Resources.Annotations.HasManyAttribute,System.Collections.Generic.ISet{JsonApiDotNetCore.Resources.IIdentifiable},JsonApiDotNetCore.Middleware.WriteOperationKind,System.Threading.CancellationToken)">
  OnSetToManyRelationshipAsync(TResource, HasManyAttribute, ISet&lt;IIdentifiable&gt;, WriteOperationKind, CancellationToken)
  <a class="header-action link-secondary" title="View source" href="https://github.com/json-api-dotnet/JsonApiDotNetCore/blob/master/src/JsonApiDotNetCore/Resources/IResourceDefinition.cs/#L199"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Executes before setting the resources at the right side of a to-many relationship. This replaces on existing set.</p>
<p>
Implementing this method enables to perform validations and make changes to <code class="paramref">rightResourceIds</code>, before the relationship is updated.
</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">Task OnSetToManyRelationshipAsync(TResource leftResource, HasManyAttribute hasManyRelationship, ISet&lt;IIdentifiable&gt; rightResourceIds, WriteOperationKind writeOperation, CancellationToken cancellationToken)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>leftResource</code> <span class="xref">TResource</span></dt>
    <dd><p>The original resource as retrieved from the underlying data store. The indication &quot;left&quot; specifies that <code class="paramref">hasManyRelationship</code> is
declared on <code class="typeparamref">TResource</code>.</p>
</dd>
    <dt><code>hasManyRelationship</code> <a class="xref" href="JsonApiDotNetCore.Resources.Annotations.HasManyAttribute.html">HasManyAttribute</a></dt>
    <dd><p>The to-many relationship being set.</p>
</dd>
    <dt><code>rightResourceIds</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.collections.generic.iset-1">ISet</a>&lt;<a class="xref" href="JsonApiDotNetCore.Resources.IIdentifiable.html">IIdentifiable</a>&gt;</dt>
    <dd><p>The set of resource identifiers to replace any existing set with, coming from the request.</p>
</dd>
    <dt><code>writeOperation</code> <a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html">WriteOperationKind</a></dt>
    <dd><p>Identifies the logical write operation for which this method was called. Possible values: <a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_CreateResource">CreateResource</a>,
<a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_UpdateResource">UpdateResource</a> and <a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_SetRelationship">SetRelationship</a>.</p>
</dd>
    <dt><code>cancellationToken</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.cancellationtoken">CancellationToken</a></dt>
    <dd><p>Propagates notification that request handling should be canceled.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.tasks.task">Task</a></dt>
    <dd></dd>
  </dl>











  <a id="JsonApiDotNetCore_Resources_IResourceDefinition_2_OnSetToOneRelationshipAsync_" data-uid="JsonApiDotNetCore.Resources.IResourceDefinition`2.OnSetToOneRelationshipAsync*"></a>

  <h3 id="JsonApiDotNetCore_Resources_IResourceDefinition_2_OnSetToOneRelationshipAsync__0_JsonApiDotNetCore_Resources_Annotations_HasOneAttribute_JsonApiDotNetCore_Resources_IIdentifiable_JsonApiDotNetCore_Middleware_WriteOperationKind_System_Threading_CancellationToken_" data-uid="JsonApiDotNetCore.Resources.IResourceDefinition`2.OnSetToOneRelationshipAsync(`0,JsonApiDotNetCore.Resources.Annotations.HasOneAttribute,JsonApiDotNetCore.Resources.IIdentifiable,JsonApiDotNetCore.Middleware.WriteOperationKind,System.Threading.CancellationToken)">
  OnSetToOneRelationshipAsync(TResource, HasOneAttribute, IIdentifiable?, WriteOperationKind, CancellationToken)
  <a class="header-action link-secondary" title="View source" href="https://github.com/json-api-dotnet/JsonApiDotNetCore/blob/master/src/JsonApiDotNetCore/Resources/IResourceDefinition.cs/#L173"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Executes before setting (or clearing) the resource at the right side of a to-one relationship.</p>
<p>
Implementing this method enables to perform validations and change <code class="paramref">rightResourceId</code>, before the relationship is updated.
</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">Task&lt;IIdentifiable?&gt; OnSetToOneRelationshipAsync(TResource leftResource, HasOneAttribute hasOneRelationship, IIdentifiable? rightResourceId, WriteOperationKind writeOperation, CancellationToken cancellationToken)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>leftResource</code> <span class="xref">TResource</span></dt>
    <dd><p>The original resource as retrieved from the underlying data store. The indication &quot;left&quot; specifies that <code class="paramref">hasOneRelationship</code> is
declared on <code class="typeparamref">TResource</code>.</p>
</dd>
    <dt><code>hasOneRelationship</code> <a class="xref" href="JsonApiDotNetCore.Resources.Annotations.HasOneAttribute.html">HasOneAttribute</a></dt>
    <dd><p>The to-one relationship being set.</p>
</dd>
    <dt><code>rightResourceId</code> <a class="xref" href="JsonApiDotNetCore.Resources.IIdentifiable.html">IIdentifiable</a></dt>
    <dd><p>The new resource identifier (or <code>null</code> to clear the relationship), coming from the request.</p>
</dd>
    <dt><code>writeOperation</code> <a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html">WriteOperationKind</a></dt>
    <dd><p>Identifies the logical write operation for which this method was called. Possible values: <a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_CreateResource">CreateResource</a>,
<a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_UpdateResource">UpdateResource</a> and <a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_SetRelationship">SetRelationship</a>.</p>
</dd>
    <dt><code>cancellationToken</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.cancellationtoken">CancellationToken</a></dt>
    <dd><p>Propagates notification that request handling should be canceled.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.tasks.task-1">Task</a>&lt;<a class="xref" href="JsonApiDotNetCore.Resources.IIdentifiable.html">IIdentifiable</a>&gt;</dt>
    <dd><p>The replacement resource identifier, or <code>null</code> to clear the relationship. Returns <code class="paramref">rightResourceId</code> by default.</p>
</dd>
  </dl>











  <a id="JsonApiDotNetCore_Resources_IResourceDefinition_2_OnWriteSucceededAsync_" data-uid="JsonApiDotNetCore.Resources.IResourceDefinition`2.OnWriteSucceededAsync*"></a>

  <h3 id="JsonApiDotNetCore_Resources_IResourceDefinition_2_OnWriteSucceededAsync__0_JsonApiDotNetCore_Middleware_WriteOperationKind_System_Threading_CancellationToken_" data-uid="JsonApiDotNetCore.Resources.IResourceDefinition`2.OnWriteSucceededAsync(`0,JsonApiDotNetCore.Middleware.WriteOperationKind,System.Threading.CancellationToken)">
  OnWriteSucceededAsync(TResource, WriteOperationKind, CancellationToken)
  <a class="header-action link-secondary" title="View source" href="https://github.com/json-api-dotnet/JsonApiDotNetCore/blob/master/src/JsonApiDotNetCore/Resources/IResourceDefinition.cs/#L307"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Executes after successfully writing the changed resource to the underlying data store, as part of a write request.</p>
<p>
Implementing this method enables to run additional logic, for example enqueue a notification message on a service bus.
</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">Task OnWriteSucceededAsync(TResource resource, WriteOperationKind writeOperation, CancellationToken cancellationToken)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>resource</code> <span class="xref">TResource</span></dt>
    <dd><p>The resource as written to the underlying data store.</p>
</dd>
    <dt><code>writeOperation</code> <a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html">WriteOperationKind</a></dt>
    <dd><p>Identifies the logical write operation for which this method was called. Possible values: <a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_CreateResource">CreateResource</a>,
<a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_UpdateResource">UpdateResource</a>, <a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_DeleteResource">DeleteResource</a>, <a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_SetRelationship">SetRelationship</a>
, <a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_AddToRelationship">AddToRelationship</a> and <a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_RemoveFromRelationship">RemoveFromRelationship</a>.</p>
</dd>
    <dt><code>cancellationToken</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.cancellationtoken">CancellationToken</a></dt>
    <dd><p>Propagates notification that request handling should be canceled.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.tasks.task">Task</a></dt>
    <dd></dd>
  </dl>











  <a id="JsonApiDotNetCore_Resources_IResourceDefinition_2_OnWritingAsync_" data-uid="JsonApiDotNetCore.Resources.IResourceDefinition`2.OnWritingAsync*"></a>

  <h3 id="JsonApiDotNetCore_Resources_IResourceDefinition_2_OnWritingAsync__0_JsonApiDotNetCore_Middleware_WriteOperationKind_System_Threading_CancellationToken_" data-uid="JsonApiDotNetCore.Resources.IResourceDefinition`2.OnWritingAsync(`0,JsonApiDotNetCore.Middleware.WriteOperationKind,System.Threading.CancellationToken)">
  OnWritingAsync(TResource, WriteOperationKind, CancellationToken)
  <a class="header-action link-secondary" title="View source" href="https://github.com/json-api-dotnet/JsonApiDotNetCore/blob/master/src/JsonApiDotNetCore/Resources/IResourceDefinition.cs/#L288"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Executes before writing the changed resource to the underlying data store, as part of a write request.</p>
<p>
Implementing this method enables to perform validations and make changes to <code class="paramref">resource</code>, after the fields from the request have been
copied into it.
</p>
<p>
An example usage is to set the last-modification timestamp, overwriting the value from the incoming request.
</p>
<p>
Another use case is to add a notification message to an outbox table, which gets committed along with the resource write in a single transaction (see
https://microservices.io/patterns/data/transactional-outbox.html).
</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">Task OnWritingAsync(TResource resource, WriteOperationKind writeOperation, CancellationToken cancellationToken)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>resource</code> <span class="xref">TResource</span></dt>
    <dd><p>The original resource retrieved from the underlying data store (or a freshly instantiated resource in case of a POST resource request), updated with
the changes from the incoming request. Exception: In case <code class="paramref">writeOperation</code> is <a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_DeleteResource">DeleteResource</a>,
<a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_AddToRelationship">AddToRelationship</a> or <a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_RemoveFromRelationship">RemoveFromRelationship</a>, this is an empty object with only
the <a class="xref" href="JsonApiDotNetCore.Resources.Identifiable-1.html#JsonApiDotNetCore_Resources_Identifiable_1_Id">Id</a> property set, because for those endpoints no resource is retrieved upfront.</p>
</dd>
    <dt><code>writeOperation</code> <a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html">WriteOperationKind</a></dt>
    <dd><p>Identifies the logical write operation for which this method was called. Possible values: <a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_CreateResource">CreateResource</a>,
<a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_UpdateResource">UpdateResource</a>, <a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_DeleteResource">DeleteResource</a>, <a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_SetRelationship">SetRelationship</a>
, <a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_AddToRelationship">AddToRelationship</a> and <a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_RemoveFromRelationship">RemoveFromRelationship</a>.</p>
</dd>
    <dt><code>cancellationToken</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.cancellationtoken">CancellationToken</a></dt>
    <dd><p>Propagates notification that request handling should be canceled.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.tasks.task">Task</a></dt>
    <dd></dd>
  </dl>












</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/json-api-dotnet/JsonApiDotNetCore/blob/master/src/JsonApiDotNetCore/Resources/IResourceDefinition.cs/#L18" class="edit-link">Edit this page</a>
        </div>


      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>


    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
