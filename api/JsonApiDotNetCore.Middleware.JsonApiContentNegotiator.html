<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Class JsonApiContentNegotiator </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Class JsonApiContentNegotiator ">
      
      <meta name="description" content="Supports all classes in the .NET class hierarchy and provides low-level services to derived classes. This is the ultimate base class of all .NET classes; it is the root of the type hierarchy.">
      <link rel="icon" href="../favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      
      
      
      <meta name="docfx:docurl" content="https://github.com/json-api-dotnet/JsonApiDotNetCore/new/master/apiSpec/new?filename=JsonApiDotNetCore_Middleware_JsonApiContentNegotiator.md&amp;value=---%0Auid%3A%20JsonApiDotNetCore.Middleware.JsonApiContentNegotiator%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

      <script async src="https://www.googletagmanager.com/gtag/js?id=G-78GTGF1FM2"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-78GTGF1FM2');
      </script>
  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="ManagedReference">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../styles/img/favicon.png" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="JsonApiDotNetCore.Middleware.JsonApiContentNegotiator">



  <h1 id="JsonApiDotNetCore_Middleware_JsonApiContentNegotiator" data-uid="JsonApiDotNetCore.Middleware.JsonApiContentNegotiator" class="text-break">
Class JsonApiContentNegotiator  <a class="header-action link-secondary" title="View source" href="https://github.com/json-api-dotnet/JsonApiDotNetCore/blob/master/src/JsonApiDotNetCore/Middleware/JsonApiContentNegotiator.cs/#L12"><i class="bi bi-code-slash"></i></a>
  </h1>

  <div class="facts text-secondary">
    <dl><dt>Namespace</dt><dd><a class="xref" href="JsonApiDotNetCore.html">JsonApiDotNetCore</a>.<a class="xref" href="JsonApiDotNetCore.Middleware.html">Middleware</a></dd></dl>
  <dl><dt>Assembly</dt><dd>JsonApiDotNetCore.dll</dd></dl>
  </div>

  <div class="markdown summary"><p>Supports all classes in the .NET class hierarchy and provides low-level services to derived classes. This is the ultimate base class of all .NET classes; it is the root of the type hierarchy.</p>
</div>
  <div class="markdown conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">[PublicAPI]
public class JsonApiContentNegotiator : IJsonApiContentNegotiator</code></pre>
  </div>




  <dl class="typelist inheritance">
    <dt>Inheritance</dt>
    <dd>
      <div><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object">object</a></div>
      <div><span class="xref">JsonApiContentNegotiator</span></div>
    </dd>
  </dl>

  <dl class="typelist implements">
    <dt>Implements</dt>
    <dd>
      <div><a class="xref" href="JsonApiDotNetCore.Middleware.IJsonApiContentNegotiator.html">IJsonApiContentNegotiator</a></div>
    </dd>
  </dl>


  <dl class="typelist inheritedMembers">
    <dt>Inherited Members</dt>
    <dd>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object)">object.Equals(object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object-system-object)">object.Equals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gethashcode">object.GetHashCode()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gettype">object.GetType()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.memberwiseclone">object.MemberwiseClone()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.referenceequals">object.ReferenceEquals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.tostring">object.ToString()</a>
    </div>
  </dd></dl>






  <h2 class="section" id="constructors">Constructors
</h2>


  <a id="JsonApiDotNetCore_Middleware_JsonApiContentNegotiator__ctor_" data-uid="JsonApiDotNetCore.Middleware.JsonApiContentNegotiator.#ctor*"></a>

  <h3 id="JsonApiDotNetCore_Middleware_JsonApiContentNegotiator__ctor_JsonApiDotNetCore_Configuration_IJsonApiOptions_Microsoft_AspNetCore_Http_IHttpContextAccessor_" data-uid="JsonApiDotNetCore.Middleware.JsonApiContentNegotiator.#ctor(JsonApiDotNetCore.Configuration.IJsonApiOptions,Microsoft.AspNetCore.Http.IHttpContextAccessor)">
  JsonApiContentNegotiator(IJsonApiOptions, IHttpContextAccessor)
  <a class="header-action link-secondary" title="View source" href="https://github.com/json-api-dotnet/JsonApiDotNetCore/blob/master/src/JsonApiDotNetCore/Middleware/JsonApiContentNegotiator.cs/#L31"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"></div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public JsonApiContentNegotiator(IJsonApiOptions options, IHttpContextAccessor httpContextAccessor)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>options</code> <a class="xref" href="JsonApiDotNetCore.Configuration.IJsonApiOptions.html">IJsonApiOptions</a></dt>
    <dd></dd>
    <dt><code>httpContextAccessor</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/microsoft.aspnetcore.http.ihttpcontextaccessor">IHttpContextAccessor</a></dt>
    <dd></dd>
  </dl>












  <h2 class="section" id="methods">Methods
</h2>


  <a id="JsonApiDotNetCore_Middleware_JsonApiContentNegotiator_GetDefaultMediaType_" data-uid="JsonApiDotNetCore.Middleware.JsonApiContentNegotiator.GetDefaultMediaType*"></a>

  <h3 id="JsonApiDotNetCore_Middleware_JsonApiContentNegotiator_GetDefaultMediaType_System_Collections_Generic_IReadOnlyList_JsonApiDotNetCore_Middleware_JsonApiMediaType__JsonApiDotNetCore_Middleware_JsonApiMediaType_" data-uid="JsonApiDotNetCore.Middleware.JsonApiContentNegotiator.GetDefaultMediaType(System.Collections.Generic.IReadOnlyList{JsonApiDotNetCore.Middleware.JsonApiMediaType},JsonApiDotNetCore.Middleware.JsonApiMediaType)">
  GetDefaultMediaType(IReadOnlyList&lt;JsonApiMediaType&gt;, JsonApiMediaType?)
  <a class="header-action link-secondary" title="View source" href="https://github.com/json-api-dotnet/JsonApiDotNetCore/blob/master/src/JsonApiDotNetCore/Middleware/JsonApiContentNegotiator.cs/#L166"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Returns the JSON:API media type (possibly including extensions) to use when no Accept header was sent.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">protected virtual JsonApiMediaType? GetDefaultMediaType(IReadOnlyList&lt;JsonApiMediaType&gt; possibleMediaTypes, JsonApiMediaType? requestMediaType)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>possibleMediaTypes</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.collections.generic.ireadonlylist-1">IReadOnlyList</a>&lt;<a class="xref" href="JsonApiDotNetCore.Middleware.JsonApiMediaType.html">JsonApiMediaType</a>&gt;</dt>
    <dd><p>The media types returned from <a class="xref" href="JsonApiDotNetCore.Middleware.JsonApiContentNegotiator.html#JsonApiDotNetCore_Middleware_JsonApiContentNegotiator_GetPossibleMediaTypes">GetPossibleMediaTypes()</a>.</p>
</dd>
    <dt><code>requestMediaType</code> <a class="xref" href="JsonApiDotNetCore.Middleware.JsonApiMediaType.html">JsonApiMediaType</a></dt>
    <dd><p>The media type from in the Content-Type header.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="JsonApiDotNetCore.Middleware.JsonApiMediaType.html">JsonApiMediaType</a></dt>
    <dd><p>The default media type to use, or <code>null</code> if not available.</p>
</dd>
  </dl>











  <a id="JsonApiDotNetCore_Middleware_JsonApiContentNegotiator_GetPossibleMediaTypes_" data-uid="JsonApiDotNetCore.Middleware.JsonApiContentNegotiator.GetPossibleMediaTypes*"></a>

  <h3 id="JsonApiDotNetCore_Middleware_JsonApiContentNegotiator_GetPossibleMediaTypes" data-uid="JsonApiDotNetCore.Middleware.JsonApiContentNegotiator.GetPossibleMediaTypes">
  GetPossibleMediaTypes()
  <a class="header-action link-secondary" title="View source" href="https://github.com/json-api-dotnet/JsonApiDotNetCore/blob/master/src/JsonApiDotNetCore/Middleware/JsonApiContentNegotiator.cs/#L180"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Gets the list of possible combinations of JSON:API extensions that are available at the current endpoint. The set of extensions in the request body
must always be the same as in the response body.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">protected virtual IReadOnlyList&lt;JsonApiMediaType&gt; GetPossibleMediaTypes()</code></pre>
  </div>


  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.collections.generic.ireadonlylist-1">IReadOnlyList</a>&lt;<a class="xref" href="JsonApiDotNetCore.Middleware.JsonApiMediaType.html">JsonApiMediaType</a>&gt;</dt>
    <dd></dd>
  </dl>







  <h4 class="section" id="JsonApiDotNetCore_Middleware_JsonApiContentNegotiator_GetPossibleMediaTypes_remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>Override this method to add support for custom JSON:API extensions. Implementations should take <a class="xref" href="JsonApiDotNetCore.Configuration.IJsonApiOptions.html#JsonApiDotNetCore_Configuration_IJsonApiOptions_Extensions">Extensions</a> into
account. During content negotiation, the first compatible entry with the highest number of extensions is preferred, but beware that clients can
overrule this using quality factors in an Accept header.</p>
</div>




  <a id="JsonApiDotNetCore_Middleware_JsonApiContentNegotiator_IsOperationsEndpoint_" data-uid="JsonApiDotNetCore.Middleware.JsonApiContentNegotiator.IsOperationsEndpoint*"></a>

  <h3 id="JsonApiDotNetCore_Middleware_JsonApiContentNegotiator_IsOperationsEndpoint" data-uid="JsonApiDotNetCore.Middleware.JsonApiContentNegotiator.IsOperationsEndpoint">
  IsOperationsEndpoint()
  <a class="header-action link-secondary" title="View source" href="https://github.com/json-api-dotnet/JsonApiDotNetCore/blob/master/src/JsonApiDotNetCore/Middleware/JsonApiContentNegotiator.cs/#L206"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"></div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">protected bool IsOperationsEndpoint()</code></pre>
  </div>


  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.boolean">bool</a></dt>
    <dd></dd>
  </dl>











  <a id="JsonApiDotNetCore_Middleware_JsonApiContentNegotiator_Negotiate_" data-uid="JsonApiDotNetCore.Middleware.JsonApiContentNegotiator.Negotiate*"></a>

  <h3 id="JsonApiDotNetCore_Middleware_JsonApiContentNegotiator_Negotiate" data-uid="JsonApiDotNetCore.Middleware.JsonApiContentNegotiator.Negotiate">
  Negotiate()
  <a class="header-action link-secondary" title="View source" href="https://github.com/json-api-dotnet/JsonApiDotNetCore/blob/master/src/JsonApiDotNetCore/Middleware/JsonApiContentNegotiator.cs/#L41"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Validates the Content-Type and Accept HTTP headers from the incoming request. Throws a <a class="xref" href="JsonApiDotNetCore.Errors.JsonApiException.html">JsonApiException</a> if unsupported. Otherwise,
returns the list of negotiated JSON:API extensions, which should always be a subset of <a class="xref" href="JsonApiDotNetCore.Configuration.IJsonApiOptions.html#JsonApiDotNetCore_Configuration_IJsonApiOptions_Extensions">Extensions</a>.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public IReadOnlySet&lt;JsonApiMediaTypeExtension&gt; Negotiate()</code></pre>
  </div>


  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.collections.generic.ireadonlyset-1">IReadOnlySet</a>&lt;<a class="xref" href="JsonApiDotNetCore.Middleware.JsonApiMediaTypeExtension.html">JsonApiMediaTypeExtension</a>&gt;</dt>
    <dd></dd>
  </dl>












</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/json-api-dotnet/JsonApiDotNetCore/blob/master/src/JsonApiDotNetCore/Middleware/JsonApiContentNegotiator.cs/#L12" class="edit-link">Edit this page</a>
        </div>


      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>


    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
